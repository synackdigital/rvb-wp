
/**
 * Pixel ratio adjustments
 */
@media only screen and (-webkit-min-device-pixel-ratio: 2) {
  #header {
    .site-title {
      @include background-size( image-width( 'rvblogo.png' ) auto );
      background-image: image-url( 'rvblogo-2x.png' );
    }
  }
  #access {
    .menu {
      .menu-item {
        &.current-menu-item {
          a {
            @include background-size( image-width( 'nav-indicator.png' ) auto );
            background-image: image-url( 'nav-indicator-2x.png' );
          }
        }
        // replace the home menu item with an icon
        &.menu-item-type-home {
          a {
            @include background-size( image-width( 'primary-menu-home-icon.png' ) auto );
            background-image: image-url('primary-menu-home-icon-2x.png' );
          }
        }
        // hide the static search menu item by default and replace the text with an icon
        &.menu-item-type-search {
          display: none;
          visibility: hidden;
          a {
            @include background-size( image-width( 'primary-menu-search-icon.png' ) auto );
            background-image: image-url('primary-menu-search-icon-2x.png' );
          }
        }
      }
    }
  }
}


/**
 * Size adjustments
 */

/* Devices up to 748px get the mobile layout */
@media screen and ( max-width: 748px ) {

  /**
   * Main styles
   */
  body {
    background-image: none;
    font-size: $base-font-size * 1.2;
    padding: 0;
  }
  input, label {
    display: block;
    width: 100%;
  }

  /**
   * Main layout containers
   * Sizes inpired by http://978.gs
   */
  #container {
    margin: 0 auto;
    max-width: $mobile-maxwidth;
    min-width: $mobile-minwidth;
  }

  /**
   * Header and main navigation
   */
  #header {
    padding-bottom: 0;
    .site-title {
      float: none;
      margin-left: auto;
      margin-right: auto;
    }
  }
  #sidebar-header {
    border-top: 1px solid darken( $bg-tint, 5% );
    float: none;
    margin-right: 0;
    padding: $base-vmargin $base-hmargin;
    html.cssgradients & {
      @include background-image( linear-gradient( top, $bg-tint, $bg-color ) );
    }
    // Hide the meta sidebar if js is enabled
    html.js & {
      display: none;
      visibility: hidden;
      &.js-visible {
        display: inherit;
        visibility: visible;
      }
    }
  }
  #access {
    .menu {
      .menu-item {
        display: none;
        visibility: hidden;
        a {
          line-height: image-height( 'primary-menu-home-icon.png' ); // home icon controls menu height
        }
        &.current-menu-item {
          display: inherit;
          visibility: visible;
        }
        // replace the home menu item with an icon
        &.menu-item-type-home {
          border-left: 1px solid darken( $decor-color, 5% );
          display: inherit;
          float: right;
          visibility: visible;
          a {
            @include replace-text-with-dimensions( 'primary-menu-home-icon.png' );
          }
        }
        // hide the static search menu item by default and replace the text with an icon
        &.menu-item-type-search {
          // onlye show the static search menu item if js is enabled
          html.js & {
            border-left: 1px solid darken( $decor-color, 5% );
            display: inherit;
            float: right;
            visibility: visible;
            a {
              @include replace-text-with-dimensions( 'primary-menu-search-icon.png' );
            }
          }
        }
      }
    }
  }

  /**
   * Primary content
   */
  #primary {
    float: none;
    width: auto;
  }

  /**
   * Asides and child navigation
   */
  #main .sidebar {
    float: none;
    padding: 0;
    width: auto;
    .nav {
      .menu {
        .page_item {
          display: none;
          visibility: hidden;
          &:first-child {
            display: inherit;
            visibility: visible;
          }
        }
      }
    }
  }

  /**
   * Footer
   */
} // max-width: 740px
